
{
    "swagger": "2.0",
    "info": {
        "description": "This is a simple example NodeJS API project to demonstrate Swagger Documentation",
        "version": "1.0.0",
        "title": "Tasks API",
        "contact": {
            "email": "abc@gmail.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        }
    },
    "schemes": ["http"],
    "host": "localhost:5000",
    "basePath": "/api",
    "paths" : {
        "/members/login": {
            "post": {
                "tags": ["Members"],
                "summary": "Login",
                "description": "Login",
                "operationId": "login",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Login",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Login"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/AuthResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },
        
        "/members/deleteaccount/{id}": {
            "delete": {
                "tags": ["Members"],
                "summary": "Delete account",
                "description": "Delete account",
                "operationId": "deleteAccount",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "Id of user",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/Response"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },


        "/workspace/add": {
            "post": {
                "tags": ["Workspace"],
                "summary": "Add Workspace",
                "description": "Add Workspace",
                "operationId": "addWorkspace",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Add Workspace",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/AddWorkspace"
                        }
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/WorkspaceResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },
        "workspace/invite-member/{id}":{
            "put": {
                "tags": ["Workspace"],
                "summary": "Invite Member",
                "description": "Invite Member",
                "operationId": "inviteMember",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id",
                        "description": "Workspace Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Invite Member",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/InviteMember"
                        }
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/WorkspaceResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
            
        },

        "/workspace/assignPM/{idworkspace}/{idmember}/{idhr}":{
            "put": {
                "tags": ["Workspace"],
                "summary": "Assign Project Manager",
                "description": "Assign Project Manager",
                "operationId": "assignPM",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "idworkspace",
                        "description": "Workspace Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "idmember",
                        "description": "Member Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "idhr",
                        "description": "HR Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/WorkspaceResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
            

        },

        "workspace/deletePM/{idworkspace}/{idmember}/{idhr}": {
            "put": {
                "tags": ["Workspace"],
                "summary": "Discharge Project Manager",
                "description": "Discharge Project Manager",
                "operationId": "DischargePM",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "idworkspace",
                        "description": "Workspace Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "idmember",
                        "description": "Member Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "idhr",
                        "description": "HR Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/WorkspaceResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "workspace/roleinworkspace/{id-workspace}/{id-member}": {
            "get": {
                "tags": ["Workspace"],
                "summary": "Get Role of a specific user in a specific workspace",
                "description": "Get Role in Workspace",
                "operationId": "getRoleInWorkspace",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "id-workspace",
                        "description": "Workspace Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "id-member",
                        "description": "Member Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/RoleInWorkspaceResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/project/add": {
            "post": {
                "tags": ["Project"],
                "summary": "Add Project",
                "description": "Add Project",
                "operationId": "addProject",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Add Project",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/AddProject"
                        }
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/ProjectResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/project/assignteamleader/{idproject}/{idmember}/{idpm}": {
            "put": {
                "tags": ["Project"],
                "summary": "Assign Team Leader",
                "description": "Assign Team Leader",
                "operationId": "assignTeamLeader",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "idproject",
                        "description": "Project Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "idmember",
                        "description": "Member Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "idpm",
                        "description": "Project Manager Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/ProjectResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/project/invite-members/{idproject}/{idtl}": {
            "put": {
                "tags": ["Project"],
                "summary": "Invite Members",
                "description": "Invite Members",
                "operationId": "inviteMembers",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "idproject",
                        "description": "Project Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "idtl",
                        "description": "Team Lead Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Invite Members",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/InviteMembers"
                        }
                    }
                ],
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/ProjectResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        


        "/performance/getcontribbution/{projectId}/{memberId}": {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the percentage of contribution of a member in a project",
                "description": "Returns the percentage of contribution of a member in a project",
                "operationId": "getContribution",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectId",
                        "description": "Project Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "memberId",
                        "description": "Member Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/ContributionResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/performance/leaderboard-workspace/{workspaceid}": {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the leaderboard of a workspace",
                "description": "Returns the leaderboard of a workspace",
                "operationId": "getLeaderboardWorkspace",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "workspaceid",
                        "description": "Workspace Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/LeaderboardResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }

        },

        "/performance/leaderboard-project/{projectid}": {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the leaderboard of a project",
                "description": "Returns the leaderboard of a project",
                "operationId": "getLeaderboardProject",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectid",
                        "description": "Project Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/LeaderboardResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/performance/finished-projects-in-time-pourcentage/{workspaceid}": {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the percentage of finished projects in time",
                "description": "Returns the percentage of finished projects in time",
                "operationId": "getFinishedProjectsInTimePourcentage",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "workspaceid",
                        "description": "Workspace Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/FinishedProjectsInTimePourcentageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/performance/finished-projects-late-pourcentage/{workspaceid}": {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the percentage of finished projects late",
                "description": "Returns the percentage of finished projects late",
                "operationId": "getFinishedProjectsLatePourcentage",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "workspaceid",
                        "description": "Workspace Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/FinishedProjectsInLatePourcentageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/performance/getrankprojectleaderboard/{projectid}/{memberId}": {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the rank of a member in the project leaderboard",
                "description": "Returns the rank of a member in the project leaderboard",
                "operationId": "getRankProjectLeaderboard",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectid",
                        "description": "Project Id",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "in": "path",
                        "name": "memberId",
                        "description": "Member Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/RankProjectLeaderboardResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/performance/alltasksintime/{idproj}": {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the percentage of tasks finished in time in a project",
                "description": "Returns the percentage of tasks finished in time",
                "operationId": "getAllTasksInTime",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "idproj",
                        "description": "Project Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/FinishedTasksInTimePourcentageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },
        "/performance/alllatetasks/{idproj}": {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the percentage of tasks finished late in a project",
                "description": "Returns the percentage of tasks finished late",
                "operationId": "getAllLateTasks",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "idproj",
                        "description": "Project Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/FinishedTasksInLatePourcentageResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        },

        "/performance/projectprogress/{idproj}" : {
            "get": {
                "tags": ["Performance"],
                "summary": "Returns the progress of a project",
                "description": "number of all done tasks / number of all tasks",
                "operationId": "getProjectProgress",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "idproj",
                        "description": "Project Id",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "schema": {
                            "$ref": "#/definitions/ProjectProgressResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input"
                    }
                }
            }
        }



    }, 
    "definitions": {
        "AuthResponse": {
            "type": "object",
            "properties": {
                "token": {
                    "type": "string"
                }
            }
        },
        "Login" :{
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "AddWorkspace": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                }
            }
        },
        "AddProject" : {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "workspaceId": {
                    "type": "string"
                },
                "memberId": {
                    "type": "string"
                },
                "startDate" : {
                    "type": "string"
                },
                "expectedEndDate": {
                    "type": "string"
                }
            }
        },
        "InviteMember": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "rateHour": {
                    "type": "number"
                },
                "rateOvertime": {
                    "type": "number"
                }
            }
        },
        
        "InviteMembers": {
            "type": "array",
            "items": {
                "email": {
                    "type": "string"
                }
            }
        },
        "Member": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer",
                    "format": "int64"
                },
                "firstName": {
                    "type": "string"
                },
                "lastName": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                }
            }
        },
        "WorkspaceResponse": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer",
                    "format": "int64"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "assignedMembers": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Member"
                    }
                }

            }
        },

        "RoleInWorkspaceResponse" :{
            "type": "object",
            "properties": {
                "role": {
                    "type": "string",
                    "enum": ["Humain Resources", "Project Manager"]
                }
            }
        },
        "ProjectResponse": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer",
                    "format": "int64"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "workspaceId": {
                    "type": "string"
                },
                "startDate" : {
                    "type": "string"
                },
                "expectedEndDate": {
                    "type": "string"
                },
                "assigned_members": {
                    "type": "array"
                }
            }
        },

        "LeaderboardResponse": {
            "type": "object",
            "properties": {
                "member": {
                    "$ref": "#/definitions/Member"
                },
                "score": {
                    "type": "integer",
                    "format": "int64"
                }
            }
        },
        "ContributionResponse" :{
            "type": "object",
            "properties": {
                "contribution": {
                    "type": "number"
                }
            }
        },
        "FinishedProjectsInTimePourcentageResponse" :{
            "type": "object",
            "properties": {
                "finishedProjectsInTimePourcentage": {
                    "type": "number"
                }
            }
        },
        "FinishedProjectsInLatePourcentageResponse": {
            "type": "object",
            "properties": {
                "finishedProjectsInLatePourcentage": {
                    "type": "number"
                }
            }
        },
        "FinishedTasksInTimePourcentageResponse":{
            "type": "object",
            "properties": {
                "totalTasksInTime":{
                    "type": "integer",
                    "format": "int64"
                },
                "numberOfTasks": {
                    "type": "integer",
                    "format": "int64"
                },
                "percentage": {
                    "type": "number"
                }
            }
        },
        "FinishedTasksInLatePourcentageResponse": {
            "type": "object",
            "properties": {
                "totallatetasks": {
                    "type": "integer",
                    "format": "int64"
                },
                "numberOfTasks": {
                    "type": "integer",
                    "format": "int64"
                },
                "percentage": {
                    "type": "number"
                }
            }
        },
        "InvalidResponse": {
            "type": "object",
            "properties": {
                "statusCode": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            }

        }
    },
    "components":{
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "in": "header"
            }
        }
    }

}
